{{ form_open({method: 'post', autocomplete: 'off', class: 'form-horizontal'}) }}
{{ form_csrf() }}

    <div class="navbar-title3 top-curve"><h2>Account Details</h2></div>
    <div style="border-radius: 0 0 6px 6px; -webkit-border-radius: 0 0 6px 6px; overflow: hidden;">
        <ul data-role="listview" data-inset="true" class="account-details bottom-curve">
            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="username" class="form-label-left">{{ lang('register.username') }}</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="text" name="username" id="username" data-bind="value: username" value="{{ form_val('username') }}" />
                    <div class="form-register-error" data-bind="visible: username.valid() === false, text: username.message()"></div>
                </div>
            </li>
            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="password1" class="form-label-left">{{ lang('register.password') }}</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="password" name="password1" id="password" data-bind="value: password1"/>
                    <div class="form-register-error" data-bind="visible: password1.valid() === false, text: password1.message()"></div>
                </div>
            </li>
            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="password2" class="form-label-left">{{ lang('register.password_confirm') }}</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="password" name="password2" id="confirm-password"  data-bind="value: password2"/>
                    <div class="form-register-error" data-bind="visible: password2.valid() === false, text: password2.message()"></div>
                </div>
            </li>
            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="email" class="form-label-left">E-mail</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="email" name="email" id="email" data-bind="value: email" value="{{ form_val('email') }}" />
                    <div class="form-register-error" data-bind="visible: email.valid() === false, text: email.message()"></div>
                </div>
            </li>
            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label  class="form-label-left">Date of Birth</label><span class="star-require">*</span></div>
                <div class="input form-container-select form-group-select-birthday">
                    {{ form_select('dob_day', form_val('dob_day'), date.days, {'class': 'sel_day sel', 'data-bind': 'value: dob.day'}) }}
                    {{ form_select('dob_month', form_val('dob_month'), date.months, {'class': 'sel_month sel', 'data-bind': 'value: dob.month'}) }}
                    {{ form_select('dob_year', form_val('dob_year'), date.years, {'class': 'sel_year sel', 'data-bind': 'value: dob.year'}) }}
                    <div class="form-register-error" data-bind="visible: dob.valid() === false, text: dob.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="street" class="form-label-left">Street</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="text" name="street" id="street" data-bind="value: street" value="{{ form_val('street') }}" />
                    <div class="form-register-error"data-bind="visible: street.valid() === false, text: street.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="city" class="form-label-left">City</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="text" name="city" id="city" data-bind="value: city" value="{{ form_val('city') }}" />
                    <div class="form-register-error" data-bind="visible: city.valid() === false, text: city.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="postcode" class="form-label-left">Zip Code</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="text" name="postcode" id="postcode" data-bind="value: postcode" value="{{ form_val('postcode') }}" />
                    <div class="form-register-error" data-bind="visible: postcode.valid() === false, text: postcode.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="country" class="form-label-left">Country</label><span class="star-require">*</span></div>
                <div class="input form-container-select">
                    <select id="country" name="country" class="sel_country sel" data-bind="value: country">
                        {% if form_val('country') == '' %}
                            <option value="" selected="selected">Choose a country</option>
                        {% else %}
                            <option value="">Choose a country</option>
                        {% endif %}

                        {% for country in countries %}
                            {% if country.id == form_val('country') %}
                                <option value="{{ country.id }}" selected="selected">{{ country.name }}</option>
                            {% else %}
                                <option value="{{ country.id }}">{{ country.name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    <div class="form-register-error" data-bind="visible: country.valid() === false, text: country.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="currency" class="form-label-left">Currency</label><span class="star-require">*</span></div>
                <div class="input form-container-select">
                    <select name="currency" class="sel_currency sel" data-bind="value: currency">
                        {% if form_val('currency') == '' %}
                            <option value="" selected="selected"> </option>
                        {% else %}
                            <option value=""> </option>
                        {% endif %}

                        {% for currency in currencies %}
                            {% if currency.id == form_val('currency') %}
                                <option value="{{ currency.id }}" selected="selected">{{ currency.name }}</option>
                            {% else %}
                                <option value="{{ currency.id }}">{{ currency.name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    <div class="form-register-error" data-bind="visible: currency.valid() === false, text: currency.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="telephone" class="form-label-left">Phone</label><span class="star-require">*</span></div>
                <div class="input">
                    <input data-clear-btn="true" type="text" name="telephone" id="telephone" data-bind="value: telephone" value="{{ form_val('telephone') }}" />
                    <div class="form-register-error" data-bind="visible: telephone.valid() === false, text: telephone.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label for="captcha" class="form-label-left">Captcha</label><span class="star-require">*</span></div>
                <div class="input">
                    {{ captcha }}
                    <div class="form-register-error"></div>
                </div>
            </li>

            <li class="li-form-group-row">
                <div class="label"><label for="terms" class="form-label-left">Terms and Conditions</label><span class="star-require">*</span></div>
                <div class="input">
                    <div class="form-container-input">
                        <input class="form-register-checkbox" type="checkbox" id="accept_terms" name="terms" data-role="none" data-bind="checked: terms"/>
                        <label class="form-register-label-input" for="accept_terms">{{ lang('register.terms') }}</label>
                        <a class="form-arrow-link" data-role="none" href="/info/gtc.html" title="">&nbsp;</a>
                    </div>
                    <div class="form-register-error" data-bind="visible: terms.valid() === false, text: terms.message()"></div>
                </div>
            </li>

            <li class="li-form-group-row" data-role="fieldcontain">
                <div class="label"><label>* required</label></div>
                <div class="input form-submit-button-center">
                    <button id="register-btn" type="submit" data-theme="a">{{ lang('register.button') }}</button>
                </div>
            </li>
        </ul>
    </div>

{{ form_close() }}

<script type="text/javascript">

    $(function () {

        $('form').submit(function () {
            $('#register-btn').html('<i class="fa fa-refresh fa-spin"></i> <span>In progress</span>');
        });

        var registration = betmatic.customer.registration.create();
        registration.email('{{ form_val('email') }}');
        registration.telephone('{{ form_val('telephone') }}');
        registration.dob.day('{{ form_val('dob_day') }}');
        registration.dob.month('{{ form_val('dob_month') }}');
        registration.dob.year('{{ form_val('dob_year') }}');
        registration.street('{{ form_val('street') }}');
        registration.city('{{ form_val('city') }}');
        registration.postcode('{{ form_val('postcode') }}');
        registration.country('{{ form_val('country') }}');
        registration.currency('{{ form_val('currency') }}');
        registration.username('{{ form_val('username') }}');

        ko.applyBindings(registration, document.getElementById('registration'));

    });

</script>
